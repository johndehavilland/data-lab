/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/json/parser/jsonParser",["require","exports","vs/nls!vs/languages/json/jsonWorker","vs/base/arrays","vs/base/types","vs/base/json"],function(e,t,r,n,o,s){var i=function(){function e(e,t,r,n,o){this.type=t,this.name=r,this.start=n,this.end=o,this.parent=e}return e.prototype.getPath=function(){var e=[];return this.parent?(e=this.parent.getPath(),this.name&&e.push(this.name),e):e},e.prototype.getChildNodes=function(){return[]},e.prototype.getValue=function(){},e.prototype.contains=function(e,t){return void 0===t&&(t=!1),e>=this.start&&e<this.end||t&&e===this.end},e.prototype.visit=function(e){return e(this)},e.prototype.getNodeFromOffset=function(e){var t=function(r){if(e>=r.start&&e<r.end){for(var n=r.getChildNodes(),o=0;o<n.length&&n[o].start<=e;o++){var s=t(n[o]);if(s)return s}return r}return null};return t(this)},e.prototype.getNodeFromOffsetEndInclusive=function(e){var t=function(r){if(e>=r.start&&e<=r.end){for(var n=r.getChildNodes(),o=0;o<n.length&&n[o].start<=e;o++){var s=t(n[o]);if(s)return s}return r}return null};return t(this)},e.prototype.validate=function(e,t,o,s){var i=this;if(void 0===s&&(s=-1),-1===s||this.contains(s)){if(Array.isArray(e.type)?n.contains(e.type,this.type)===!1?t.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",0,e.type.join())}):e.type.length>0&&(t.typeMatch=!0):e.type&&(this.type!==e.type?t.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",1,e.type)}):t.typeMatch=!0),Array.isArray(e.allOf)&&e.allOf.forEach(function(e){i.validate(e,t,o,s)}),e.not){var a=new f,l=[];this.validate(e.not,a,l,s),a.hasErrors()||t.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",2)}),o&&l.forEach(function(e){e.inverted=!e.inverted,o.push(e)})}var c=function(e,n){var s=0,a=null;return e.forEach(function(e){var t=new f,r=[];if(i.validate(e,t,r),t.hasErrors()||s++,a)if(n||t.hasErrors()||a.validationResult.hasErrors()){var o=t.compare(a.validationResult);o>0?a={schema:e,validationResult:t,matchingSchemas:r}:0===o&&a.matchingSchemas.push.apply(a.matchingSchemas,r)}else a.matchingSchemas.push.apply(a.matchingSchemas,r),a.validationResult.propertiesMatches+=t.propertiesMatches,a.validationResult.propertiesValueMatches+=t.propertiesValueMatches;else a={schema:e,validationResult:t,matchingSchemas:r}}),s>1&&n&&t.warnings.push({location:{start:i.start,end:i.start+1},message:r.localize("vs_languages_json_parser_jsonParser",3)}),null!==a&&(t.merge(a.validationResult),t.propertiesMatches+=a.validationResult.propertiesMatches,t.propertiesValueMatches+=a.validationResult.propertiesValueMatches,o&&o.push.apply(o,a.matchingSchemas)),s};Array.isArray(e.anyOf)&&c(e.anyOf,!1),Array.isArray(e.oneOf)&&c(e.oneOf,!0),Array.isArray(e.enum)&&n.contains(e.enum,this.getValue())===!1&&t.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",4,JSON.stringify(e.enum))}),null!==o&&o.push({node:this,schema:e})}},e}();t.ASTNode=i;var a=function(e){function t(t,r,n,o){e.call(this,t,"null",r,n,o)}return __extends(t,e),t.prototype.getValue=function(){return null},t}(i);t.NullASTNode=a;var l=function(e){function t(t,r,n,o,s){e.call(this,t,"boolean",r,o,s),this.value=n}return __extends(t,e),t.prototype.getValue=function(){return this.value},t}(i);t.BooleanASTNode=l;var c=function(e){function t(t,r,n,o){e.call(this,t,"array",r,n,o),this.items=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.items},t.prototype.getValue=function(){return this.items.map(function(e){return e.getValue()})},t.prototype.addItem=function(e){return e?(this.items.push(e),!0):!1},t.prototype.visit=function(e){for(var t=e(this),r=0;r<this.items.length&&t;r++)t=this.items[r].visit(e);return t},t.prototype.validate=function(t,n,o,s){var i=this;if(void 0===s&&(s=-1),-1===s||this.contains(s)){if(e.prototype.validate.call(this,t,n,o,s),Array.isArray(t.items)){var a=t.items;a.forEach(function(e,r){var a=new f,l=i.items[r];l?(l.validate(e,a,o,s),n.mergePropertyMatch(a)):i.items.length>=t.items.length&&n.propertiesValueMatches++}),t.additionalItems===!1&&this.items.length>a.length?n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",5,a.length)}):this.items.length>=t.items.length&&(n.propertiesValueMatches+=this.items.length-t.items.length)}else t.items&&this.items.forEach(function(e){var r=new f;e.validate(t.items,r,o,s),n.mergePropertyMatch(r)});if(t.minItems&&this.items.length<t.minItems&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",6,t.minItems)}),t.maxItems&&this.items.length>t.maxItems&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",7,t.minItems)}),t.uniqueItems===!0){var l=this.items.map(function(e){return e.getValue()}),c=l.some(function(e,t){return t!==l.lastIndexOf(e)});c&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",8)})}}},t}(i);t.ArrayASTNode=c;var u=function(e){function t(t,r,n,o){e.call(this,t,"number",r,n,o),this.isInteger=!0,this.value=Number.NaN}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,s,i,a){if(void 0===a&&(a=-1),-1===a||this.contains(a)){var l=!1;("integer"===t.type||Array.isArray(t.type)&&n.contains(t.type,"integer"))&&(l=!0),l&&this.isInteger===!0&&(this.type="integer"),e.prototype.validate.call(this,t,s,i,a),this.type="number";var c=this.getValue();o.isNumber(t.multipleOf)&&c%t.multipleOf!==0&&s.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",9,t.multipleOf)}),o.isUndefined(t.minimum)||(t.exclusiveMinimum&&c<=t.minimum&&s.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",10,t.minimum)}),!t.exclusiveMinimum&&c<t.minimum&&s.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",11,t.minimum)})),o.isUndefined(t.maximum)||(t.exclusiveMaximum&&c>=t.maximum&&s.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",12,t.maximum)}),!t.exclusiveMaximum&&c>t.maximum&&s.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",13,t.maximum)}))}},t}(i);t.NumberASTNode=u;var d=function(e){function t(t,r,n,o,s){this.isKey=n,this.value="",e.call(this,t,"string",r,o,s)}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.validate=function(t,n,o,s){if(void 0===s&&(s=-1),(-1===s||this.contains(s))&&(e.prototype.validate.call(this,t,n,o,s),t.minLength&&this.value.length<t.minLength&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",14,t.minLength)}),t.maxLength&&this.value.length>t.maxLength&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",15,t.maxLength)}),t.pattern)){var i=new RegExp(t.pattern);i.test(this.value)||n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",16,t.pattern)})}},t}(i);t.StringASTNode=d;var h=function(e){function t(t,r){e.call(this,t,"property",null,r.start),this.key=r,r.parent=this,r.name=r.value,this.colonOffset=-1}return __extends(t,e),t.prototype.getChildNodes=function(){return this.value?[this.key,this.value]:[this.key]},t.prototype.setValue=function(e){return this.value=e,null!==e},t.prototype.visit=function(e){return e(this)&&this.key.visit(e)&&this.value&&this.value.visit(e)},t.prototype.validate=function(e,t,r,n){void 0===n&&(n=-1),(-1===n||this.contains(n))&&this.value&&this.value.validate(e,t,r,n)},t}(i);t.PropertyASTNode=h;var p=function(e){function t(t,r,n,o){e.call(this,t,"object",r,n,o),this.properties=[]}return __extends(t,e),t.prototype.getChildNodes=function(){return this.properties},t.prototype.addProperty=function(e){return e?(this.properties.push(e),!0):!1},t.prototype.getFirstProperty=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].key.value===e)return this.properties[t];return null},t.prototype.getKeyList=function(){return this.properties.map(function(e){return e.key.getValue()})},t.prototype.getValue=function(){var e={};return this.properties.forEach(function(t){var r=t.value.getValue();r&&(e[t.key.getValue()]=r)}),e},t.prototype.visit=function(e){for(var t=e(this),r=0;r<this.properties.length&&t;r++)t=this.properties[r].visit(e);return t},t.prototype.validate=function(t,n,s,i){var a=this;if(void 0===i&&(i=-1),-1===i||this.contains(i)){e.prototype.validate.call(this,t,n,s,i);var l={},c=[];this.properties.forEach(function(e){var t=e.key.value;l[t]=e.value,c.push(t)}),Array.isArray(t.required)&&t.required.forEach(function(e){l[e]||n.warnings.push({location:{start:a.start,end:a.start+1},message:r.localize("vs_languages_json_parser_jsonParser",17,e)})});var u=function(e){for(var t=c.indexOf(e);t>=0;)c.splice(t,1),t=c.indexOf(e)};t.properties&&Object.keys(t.properties).forEach(function(e){u(e);var r=t.properties[e],o=l[e];if(o){var a=new f;o.validate(r,a,s,i),n.mergePropertyMatch(a)}}),t.patternProperties&&Object.keys(t.patternProperties).forEach(function(e){var r=new RegExp(e);c.slice(0).forEach(function(o){if(r.test(o)){u(o);var a=l[o];if(a){var c=new f;a.validate(t.patternProperties[e],c,s,i),n.mergePropertyMatch(c)}}})}),o.isObject(t.additionalProperties)?c.forEach(function(e){var r=l[e];if(r){var o=new f;r.validate(t.additionalProperties,o,s,i),n.mergePropertyMatch(o)}}):t.additionalProperties===!1&&c.length>0&&c.forEach(function(e){var t=l[e];if(t){var o=t.parent;n.warnings.push({location:{start:o.key.start,end:o.key.end},message:r.localize("vs_languages_json_parser_jsonParser",18)})}}),t.maxProperties&&this.properties.length>t.maxProperties&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",19,t.maxProperties)}),t.minProperties&&this.properties.length<t.minProperties&&n.warnings.push({location:{start:this.start,end:this.end},message:r.localize("vs_languages_json_parser_jsonParser",20,t.minProperties)}),o.isObject(t.dependencies)&&Object.keys(t.dependencies).forEach(function(e){var c=l[e];if(c)if(Array.isArray(t.dependencies[e])){var u=t.dependencies[e];u.forEach(function(t){l[t]?n.propertiesValueMatches++:n.warnings.push({location:{start:a.start,end:a.end},message:r.localize("vs_languages_json_parser_jsonParser",21,t,e)})})}else if(o.isObject(t.dependencies[e])){var d=t.dependencies[e],h=new f;a.validate(d,h,s,i),n.mergePropertyMatch(h)}})}},t}(i);t.ObjectASTNode=p;var m=function(){function e(){this.ignoreDanglingComma=!1}return e}();t.JSONDocumentConfig=m;var f=function(){function e(){this.errors=[],this.warnings=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.typeMatch=!1}return e.prototype.hasErrors=function(){return!!this.errors.length||!!this.warnings.length},e.prototype.mergeAll=function(e){var t=this;e.forEach(function(e){t.merge(e)})},e.prototype.merge=function(e){this.errors=this.errors.concat(e.errors),this.warnings=this.warnings.concat(e.warnings)},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,e.hasErrors()||this.propertiesValueMatches++},e.prototype.compare=function(e){var t=this.hasErrors();return t!==e.hasErrors()?t?-1:1:this.typeMatch!==e.typeMatch?e.typeMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();t.ValidationResult=f;var v=function(){function e(e){this.config=e,this.validationResult=new f}return Object.defineProperty(e.prototype,"errors",{get:function(){return this.validationResult.errors},set:function(e){this.validationResult.errors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this.validationResult.warnings},set:function(e){this.validationResult.warnings=e},enumerable:!0,configurable:!0}),e.prototype.getNodeFromOffset=function(e){return this.root&&this.root.getNodeFromOffset(e)},e.prototype.getNodeFromOffsetEndInclusive=function(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)},e.prototype.visit=function(e){this.root&&this.root.visit(e)},e.prototype.validate=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=-1),this.root&&this.root.validate(e,this.validationResult,t,r)},e}();t.JSONDocument=v;var g=function(){function e(){}return e.prototype.parse=function(e,t){function n(e){return S.getToken()===e?(S.scan(),!0):!1}function o(e,t,r,n){if(void 0===t&&(t=null),void 0===r&&(r=[]),void 0===n&&(n=[]),0===T.errors.length||T.errors[0].location.start!==S.getTokenOffset()){var o={message:e,location:{start:S.getTokenOffset(),end:S.getTokenOffset()+S.getTokenLength()}};T.errors.push(o)}if(t&&f(t,!1),r.length+n.length>0)for(var i=S.getToken();i!==s.SyntaxKind.EOF;){if(-1!==r.indexOf(i)){S.scan();break}if(-1!==n.indexOf(i))break;i=S.scan()}return t}function i(){switch(S.getTokenError()){case s.ScanError.InvalidUnicode:return o(r.localize("vs_languages_json_parser_jsonParser",22)),!0;case s.ScanError.InvalidEscapeCharacter:return o(r.localize("vs_languages_json_parser_jsonParser",23)),!0;case s.ScanError.UnexpectedEndOfNumber:return o(r.localize("vs_languages_json_parser_jsonParser",24)),!0;case s.ScanError.UnexpectedEndOfComment:return o(r.localize("vs_languages_json_parser_jsonParser",25)),!0;case s.ScanError.UnexpectedEndOfString:return o(r.localize("vs_languages_json_parser_jsonParser",26)),!0}return!1}function f(e,t){return e.end=S.getTokenOffset()+S.getTokenLength(),t&&S.scan(),e}function g(e,t){if(S.getToken()!==s.SyntaxKind.OpenBracketToken)return null;var i=new c(e,t,S.getTokenOffset());S.scan();var a=0;if(i.addItem(x(i,""+a++)))for(;n(s.SyntaxKind.CommaToken);)i.addItem(x(i,""+a++))||T.config.ignoreDanglingComma||o(r.localize("vs_languages_json_parser_jsonParser",27));return S.getToken()!==s.SyntaxKind.CloseBracketToken?o(r.localize("vs_languages_json_parser_jsonParser",28),i):f(i,!0)}function b(e,t){var n=y(null,null,!0);if(!n){if(S.getToken()===s.SyntaxKind.Unknown){var i=S.getTokenValue();i.length>0&&("'"===i.charAt(0)||s.isLetter(i.charAt(0).charCodeAt(0)))&&o(r.localize("vs_languages_json_parser_jsonParser",29))}return null}var a=new h(e,n);return t[n.value]&&T.warnings.push({location:{start:a.key.start,end:a.key.end},message:r.localize("vs_languages_json_parser_jsonParser",30)}),t[n.value]=!0,S.getToken()!==s.SyntaxKind.ColonToken?o(r.localize("vs_languages_json_parser_jsonParser",31),a,[],[s.SyntaxKind.CloseBraceToken,s.SyntaxKind.CommaToken]):(a.colonOffset=S.getTokenOffset(),S.scan(),a.setValue(x(a,a.key.getValue()))?f(a,!1):o(r.localize("vs_languages_json_parser_jsonParser",32),a,[],[s.SyntaxKind.CloseBraceToken,s.SyntaxKind.CommaToken]))}function w(e,t){if(S.getToken()!==s.SyntaxKind.OpenBraceToken)return null;var i=new p(e,t,S.getTokenOffset());S.scan();var a={};if(i.addProperty(b(i,a)))for(;n(s.SyntaxKind.CommaToken);)i.addProperty(b(i,a))||T.config.ignoreDanglingComma||o(r.localize("vs_languages_json_parser_jsonParser",33));return S.getToken()!==s.SyntaxKind.CloseBraceToken?o(r.localize("vs_languages_json_parser_jsonParser",34),i):f(i,!0)}function y(e,t,r){if(S.getToken()!==s.SyntaxKind.StringLiteral)return null;var n=new d(e,t,r,S.getTokenOffset());return n.value=S.getTokenValue(),i(),f(n,!0)}function _(e,t){if(S.getToken()!==s.SyntaxKind.NumericLiteral)return null;var n=new u(e,t,S.getTokenOffset());if(!i()){var a=S.getTokenValue();try{var l=JSON.parse(a);if("number"!=typeof l)return o(r.localize("vs_languages_json_parser_jsonParser",35),n);n.value=l}catch(c){return o(r.localize("vs_languages_json_parser_jsonParser",36),n)}n.isInteger=-1===a.indexOf(".")}return f(n,!0)}function k(e,t){var r;switch(S.getToken()){case s.SyntaxKind.NullKeyword:r=new a(e,t,S.getTokenOffset());break;case s.SyntaxKind.TrueKeyword:r=new l(e,t,!0,S.getTokenOffset());break;case s.SyntaxKind.FalseKeyword:r=new l(e,t,!1,S.getTokenOffset());break;default:return null}return f(r,!0)}function x(e,t){return g(e,t)||w(e,t)||y(e,t,!1)||_(e,t)||k(e,t)}void 0===t&&(t=new m);var T=new v(t),S=s.createScanner(e,!0);return S.scan(),T.root=x(null,"root"),T.root?S.getToken()!==s.SyntaxKind.EOF&&o(r.localize("vs_languages_json_parser_jsonParser",38)):o(r.localize("vs_languages_json_parser_jsonParser",37)),T},e}();t.JSONParser=g}),define("vs/languages/json/jsonSchemaService",["require","exports","vs/nls!vs/languages/json/jsonWorker","vs/base/objects","vs/base/types","vs/base/lib/winjs.base","vs/platform/services"],function(e,t,r,n,o,s,i){var a=function(){function e(e,t){this.url=e,this.filePatterns=t}return e.prototype.matchesPattern=function(e){for(var t=0;t<this.filePatterns.length;t++)if(this.filePatterns[t].test(e))return!0;return!1},e}(),l=function(){function e(e,t,r){void 0===r&&(r=null),this.service=e,this.url=t,this.schema=null,r&&(this.schema=s.TPromise.as(new c(r).resolveInlineReferences()))}return e.prototype.getSchema=function(){return null===this.schema&&(this.schema=this.service.fetchFileSchema(this.url)),this.schema},e.prototype.clearSchema=function(){this.schema=null},e}(),c=function(){function e(e,t){void 0===t&&(t=null),this.schema=e,this.loadError=t}return e.prototype.getSection=function(e){return this.getSectionRecursive(e,this.schema)},e.prototype.getSectionRecursive=function(e,t){var r=this;if(!t||0===e.length)return t;var n=e.shift();if(t.properties&&t.properties[n])return this.getSectionRecursive(e,t.properties[n]);if(o.isObject(t.patternProperties))Object.keys(t.patternProperties).forEach(function(o){var s=new RegExp(o);return s.test(n)?r.getSectionRecursive(e,t.patternProperties[o]):void 0});else{if(o.isObject(t.additionalProperties))return this.getSectionRecursive(e,t.additionalProperties);if(n.match("[0-9]+")){if(o.isObject(t.items))return this.getSectionRecursive(e,t.items);if(Array.isArray(t.items))try{var s=parseInt(n,10);return t.items[s]?this.getSectionRecursive(e,t.items[s]):null}catch(i){return null}}}return null},e.prototype.resolveInlineReferences=function(){for(var e=[{parent:null,key:null,value:this.schema}];e.length;){var t=e.pop();Array.isArray(t.value)?t.value.forEach(function(r,n){e.push({parent:t.value,key:n,value:r})}):o.isObject(t.value)&&(t.value.$ref?t.parent[t.key]=this.getInlineReference(t.value.$ref):Object.keys(t.value).forEach(function(r){e.push({parent:t.value,key:r,value:t.value[r]})}))}return this},e.prototype.getInlineReference=function(e){if("#"!==e[0])return{};if("#"===e)return this.schema;var t=this.schema;return e.substr(2).split("/").some(function(e){return t=t[e],!t}),t||{}},e}();t.FileSchema=c;var u=function(){function e(e){var t=this;this.requestService=e.requestService,this.callOnDispose=[];var r=e.resourceService;r&&this.callOnDispose.push(r.addBulkListener(function(e){return t.onResourceChange(e)})),this.configurationSchemas={},this.preloadedSchemas={},this.unresolvedReferences=[],this.schemasById={},this.schemasFilePatternMapping=[],this.addPreloadedFileSchemas()}return e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){for(var t=0,r=e.length;r>t;t++){var n=e[t];if(n.getType()===i.ResourceEvents.CHANGED){var o=n.getData(),s=o.url.toExternal(),a=this.schemasById[s];a&&a.clearSchema()}}},e.prototype.registerConfigurationSchema=function(e){var t=this;this.configurationSchemas[e.id]=e;var r=function(e){e.$ref?t.unresolvedReferences.push({id:e.$ref,section:e}):e.properties&&Object.keys(e.properties).forEach(function(t){r(e.properties[t])})},o=function(){t.unresolvedReferences=t.unresolvedReferences.filter(function(e){var r=t.configurationSchemas[e.id];return r?(n.mixin(e.section,r),!1):!0})};r(e),o()},e.prototype.registerExternalSchema=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=new l(this,e,r);return this.schemasById[e]=n,t&&t.length>0&&this.schemasFilePatternMapping.push(new a(e,t)),n},e.prototype.clearExternalSchemas=function(){this.schemasById={},this.schemasFilePatternMapping=[]},e.prototype.getConfigurationSchema=function(e){return this.configurationSchemas[e]},e.prototype.fetchFileSchema=function(e){var t=this.preloadedSchemas[e];return t?s.TPromise.as(t):this.requestService.makeRequest({url:e}).then(function(e){return e.responseText}).then(function(e){var t=null;try{t=JSON.parse(e)}catch(r){}return t?new c(t).resolveInlineReferences():null},function(t){var n=r.localize("vs_languages_json_jsonSchemaService",0,e,t.statusText||t.toString());return console.log(n),new c({},n)})},e.prototype.getSchemaForResource=function(e,t){if(-1!==e.indexOf("/.settings/")){var r=this.configurationSchemas.configurationFile;return r?s.TPromise.as(new c(r)):s.TPromise.as(null)}if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter(function(e){return"$schema"===e.key.value&&!!e.value});if(n.length>0){var o=n[0].value.getValue(),i=this.schemasById[o];if(i)return i.getSchema();if(o)return this.registerExternalSchema(o).getSchema()}}for(var a=this.schemasFilePatternMapping.length-1;a>=0;a--){var l=this.schemasFilePatternMapping[a];if(l.matchesPattern(e)){var i=this.schemasById[l.url];if(i)return i.getSchema()}}return s.TPromise.as(null)},e.prototype.addPreloadedFileSchema=function(e,t){var r=new c(t).resolveInlineReferences();this.preloadedSchemas[e]=r},e.prototype.addPreloadedFileSchemas=function(){this.addPreloadedFileSchema("http://json-schema.org/draft-04/schema#",{id:"http://json-schema.org/draft-04/schema#",title:r.localize("vs_languages_json_jsonSchemaService",1),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri",description:r.localize("vs_languages_json_jsonSchemaService",2)},$schema:{type:"string",format:"uri",description:r.localize("vs_languages_json_jsonSchemaService",3)},title:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",4)},description:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",5)},default:{description:r.localize("vs_languages_json_jsonSchemaService",6)},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0,description:r.localize("vs_languages_json_jsonSchemaService",7)},maximum:{type:"number",description:r.localize("vs_languages_json_jsonSchemaService",8)},exclusiveMaximum:{type:"boolean",default:!1,description:r.localize("vs_languages_json_jsonSchemaService",9)},minimum:{type:"number",description:r.localize("vs_languages_json_jsonSchemaService",10)},exclusiveMinimum:{type:"boolean",default:!1,description:r.localize("vs_languages_json_jsonSchemaService",11)},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:r.localize("vs_languages_json_jsonSchemaService",12)},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:r.localize("vs_languages_json_jsonSchemaService",13)},pattern:{type:"string",format:"regex",description:r.localize("vs_languages_json_jsonSchemaService",14)},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:r.localize("vs_languages_json_jsonSchemaService",15)},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{},description:r.localize("vs_languages_json_jsonSchemaService",16)},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:r.localize("vs_languages_json_jsonSchemaService",17)},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:r.localize("vs_languages_json_jsonSchemaService",18)},uniqueItems:{type:"boolean",default:!1,description:r.localize("vs_languages_json_jsonSchemaService",19)},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:r.localize("vs_languages_json_jsonSchemaService",20)},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:r.localize("vs_languages_json_jsonSchemaService",21)},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:r.localize("vs_languages_json_jsonSchemaService",22)},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:r.localize("vs_languages_json_jsonSchemaService",23)},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{},description:r.localize("vs_languages_json_jsonSchemaService",24)},properties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:r.localize("vs_languages_json_jsonSchemaService",25)},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:r.localize("vs_languages_json_jsonSchemaService",26)},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:r.localize("vs_languages_json_jsonSchemaService",27)},enum:{type:"array",minItems:1,uniqueItems:!0,description:r.localize("vs_languages_json_jsonSchemaService",28)},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}],description:r.localize("vs_languages_json_jsonSchemaService",29)},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:r.localize("vs_languages_json_jsonSchemaService",30)},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:r.localize("vs_languages_json_jsonSchemaService",31)},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:r.localize("vs_languages_json_jsonSchemaService",32)},not:{allOf:[{$ref:"#"}],description:r.localize("vs_languages_json_jsonSchemaService",33)}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}),this.addPreloadedFileSchema("http://json.schemastore.org/project",{title:r.localize("vs_languages_json_jsonSchemaService",34),$schema:"http://json-schema.org/draft-04/schema#",id:"http://json.schemastore.org/project",type:"object",definitions:{compilationOptions:{description:r.localize("vs_languages_json_jsonSchemaService",35),type:"object",properties:{define:{type:"array",items:{type:"string",uniqueItems:!0}},warningsAsErrors:{type:"boolean",default:!1},allowUnsafe:{type:"boolean",default:!1},optimize:{type:"boolean",default:!1},languageVersion:{type:"string",enum:["csharp1","csharp2","csharp3","csharp4","csharp5","csharp6","experimental"]}}},configType:{type:"object",properties:{dependencies:{$ref:"#/definitions/dependencies"},compilationOptions:{$ref:"#/definitions/compilationOptions"},frameworkAssemblies:{$ref:"#/definitions/dependencies"}}},dependencies:{type:"object",additionalProperties:{type:["string","object"],properties:{version:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",36)},type:{type:"string",default:"default",enum:["default","build"],description:r.localize("vs_languages_json_jsonSchemaService",37)}},id:"nugget-package"},description:r.localize("vs_languages_json_jsonSchemaService",38),id:"nugget-packages"},script:{type:["string","array"],items:{type:"string"},description:r.localize("vs_languages_json_jsonSchemaService",39)}},properties:{authors:{description:r.localize("vs_languages_json_jsonSchemaService",40),type:"array",items:{type:"string",uniqueItems:!0}},code:{description:r.localize("vs_languages_json_jsonSchemaService",41),type:["string","array"],items:{type:"string"},default:"**\\*.cs"},commands:{description:r.localize("vs_languages_json_jsonSchemaService",42),type:"object",additionalProperties:{type:"string"}},compilationOptions:{$ref:"#/definitions/compilationOptions"},configurations:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",43),additionalProperties:{type:"object",properties:{compilationOptions:{$ref:"#/definitions/compilationOptions"}}}},dependencies:{$ref:"#/definitions/dependencies"},description:{description:r.localize("vs_languages_json_jsonSchemaService",44),type:"string"},exclude:{description:r.localize("vs_languages_json_jsonSchemaService",45),type:["string","array"],items:{type:"string"},default:["bin/**/*.*","obj/**/*.*"]},frameworks:{description:r.localize("vs_languages_json_jsonSchemaService",46),type:"object",additionalProperties:{$ref:"#/definitions/configType"}},packExclude:{description:r.localize("vs_languages_json_jsonSchemaService",47),type:["string","array"],items:{type:"string"},default:""},preprocess:{description:r.localize("vs_languages_json_jsonSchemaService",48),type:"string",default:"Compiler\\Preprocess\\**\\*.cs"},resources:{description:r.localize("vs_languages_json_jsonSchemaService",49),type:["string","array"],items:{type:"string"},default:"Compiler\\Resources\\**\\*.cs"},scripts:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",50),properties:{prebuild:{$ref:"#/definitions/script"},postbuild:{$ref:"#/definitions/script"},prepack:{$ref:"#/definitions/script"},postpack:{$ref:"#/definitions/script"},prerestore:{$ref:"#/definitions/script"},postrestore:{$ref:"#/definitions/script"},prepare:{$ref:"#/definitions/script"}}},shared:{description:r.localize("vs_languages_json_jsonSchemaService",51),type:["string","array"],items:{type:"string"},default:"Compiler\\Shared\\**\\*.cs"},version:{description:r.localize("vs_languages_json_jsonSchemaService",52),type:"string"},webroot:{description:r.localize("vs_languages_json_jsonSchemaService",53),type:"string"}}}),this.addPreloadedFileSchema("http://json.schemastore.org/bower",{title:r.localize("vs_languages_json_jsonSchemaService",54),$schema:"http://json-schema.org/draft-04/schema#",id:"http://json.schemastore.org/bower",type:"object",required:["name"],patternProperties:{"^_":{description:r.localize("vs_languages_json_jsonSchemaService",55),additionalProperties:!0,additionalItems:!0}},properties:{name:{description:r.localize("vs_languages_json_jsonSchemaService",56),type:"string",maxLength:50},description:{description:r.localize("vs_languages_json_jsonSchemaService",57),type:"string"},version:{description:r.localize("vs_languages_json_jsonSchemaService",58),type:"string"},main:{description:r.localize("vs_languages_json_jsonSchemaService",59),type:["string","array"]},license:{description:r.localize("vs_languages_json_jsonSchemaService",60),type:["string","array"],maxLength:140},ignore:{description:r.localize("vs_languages_json_jsonSchemaService",61),type:["string","array"]},keywords:{description:r.localize("vs_languages_json_jsonSchemaService",62),type:"array",items:{type:"string",maxLength:50}},authors:{description:r.localize("vs_languages_json_jsonSchemaService",63),type:"array",items:{type:["string","object"]}},homepage:{description:r.localize("vs_languages_json_jsonSchemaService",64),type:"string"},repository:{description:r.localize("vs_languages_json_jsonSchemaService",65),type:"object",properties:{type:{type:"string",enum:["git"]},url:{type:"string"}}},dependencies:{id:"bower-packages",description:r.localize("vs_languages_json_jsonSchemaService",66),type:"object",additionalProperties:{id:"bower-package",type:"string"}},devDependencies:{id:"bower-packages",description:r.localize("vs_languages_json_jsonSchemaService",67),type:"object",additionalProperties:{id:"bower-package",type:"string"}},resolutions:{description:r.localize("vs_languages_json_jsonSchemaService",68),type:"object"},private:{description:r.localize("vs_languages_json_jsonSchemaService",69),type:"boolean"},exportsOverride:{description:r.localize("vs_languages_json_jsonSchemaService",70),type:"object",additionalProperties:{type:"object",additionalProperties:{type:"string"}}},moduleType:{description:r.localize("vs_languages_json_jsonSchemaService",71),type:"array",items:{enum:["amd","es6","globals","node","yui"]}}}}),this.addPreloadedFileSchema("http://json.schemastore.org/package",{id:"http://json.schemastore.org/package",description:r.localize("vs_languages_json_jsonSchemaService",72),type:"object",required:["name","version"],properties:{name:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",73)},version:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",74),pattern:"^\\s*[v=]*\\s*([0-9]+)\\.([0-9]+)\\.([0-9]+)(-[0-9]+-?)?([a-zA-Z-][a-zA-Z0-9-.:]*)?$"},description:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",75)},keywords:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",76),items:{type:"string"}},url:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",77),format:"uri"},bugs:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",78)},license:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",79)},author:{description:r.localize("vs_languages_json_jsonSchemaService",80),oneOf:[{type:"string"},{type:"object",required:["name"],properties:{name:{type:"string"},email:{type:"string"},url:{type:"string",format:"uri"}}}]},contributors:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",81),items:{oneOf:[{type:"string"},{type:"object",required:["name"],properties:{name:{type:"string"},email:{type:"string"},url:{type:"string",format:"uri"}}}]}},files:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",82),items:{type:"string"}},main:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",83)},bin:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",84)},man:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",85)},repository:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",86),required:["type","url"],properties:{type:{type:"string",description:r.localize("vs_languages_json_jsonSchemaService",87)},url:{type:"string",format:"uri"}}},dependencies:{id:"npm-packages",type:"object",description:r.localize("vs_languages_json_jsonSchemaService",88),additionalProperties:{id:"npm-package",type:"string"}},devDependencies:{id:"npm-packages",type:"object",description:r.localize("vs_languages_json_jsonSchemaService",89),additionalProperties:{id:"npm-package",type:"string"}},bundledDependencies:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",90),items:{type:"string"}},optionalDependencies:{id:"npm-packages",type:"object",description:r.localize("vs_languages_json_jsonSchemaService",91),additionalProperties:{id:"npm-package",type:"string"}},scripts:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",92)},config:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",93)},engines:{type:"object",description:r.localize("vs_languages_json_jsonSchemaService",94)},os:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",95),items:{type:"string"}},cpu:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",96),items:{type:"string"}},preferGlobal:{type:"boolean",description:r.localize("vs_languages_json_jsonSchemaService",97)},engineStrict:{type:"boolean",description:r.localize("vs_languages_json_jsonSchemaService",98)},private:{type:"boolean",description:r.localize("vs_languages_json_jsonSchemaService",99)}}}),this.addPreloadedFileSchema("http://json.schemastore.org/global",{title:r.localize("vs_languages_json_jsonSchemaService",100),type:"object",additionalProperties:!0,required:["sources"],properties:{sources:{type:"array",description:r.localize("vs_languages_json_jsonSchemaService",101),items:{type:"string"}}}})
},e}();t.JSONSchemaService=u}),define("vs/languages/json/jsonIntellisense",["require","exports","./parser/jsonParser","vs/base/types","vs/base/lib/winjs.base"],function(e,t,r,n,o){var s=function(){function e(e,t){this.schemaService=e.schemaService,this.requestService=e.requestService,this.contributions=t}return e.prototype.doSuggest=function(e,t,n){var s=this,i=t.getWordUntilPosition(n,!0,!0).word,a=new r.JSONParser,l=new r.JSONDocumentConfig;l.ignoreDanglingComma=!0;var c=a.parse(t.getValue(),l),u=t.getOffsetFromPosition(n),d=c.getNodeFromOffsetEndInclusive(u);if(!d)return null;var h=t.getRangeFromOffsetAndLength(d.start,d.end-d.start),p=!1;if("string"===d.type){var m=d,f=h.startColumn;m.isKey&&(p=!0,f++,d.parent&&(d=d.parent.parent)),i=t.getValueInRange({startColumn:f,startLineNumber:h.startLineNumber,endColumn:n.column,endLineNumber:n.lineNumber})}var v={currentWord:i,incomplete:!1,suggestions:[]},g={},b={add:function(e){g[e.label]||(g[e.label]=!0,v.suggestions.push(e))},setAsIncomplete:function(){v.incomplete=!0}};return this.schemaService.getSchemaForResource(e.toExternal(),c).then(function(e){var r=[];if(d&&"object"===d.type){if(d.start===u)return v;var n=d.properties,a=0===n.length||u>=n[n.length-1].end;if(e){var l=[];c.validate(e.schema,l,d.start),l.forEach(function(e){if(e.node===d&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach(function(e){var r=t[e];b.add({type:"property",label:e,codeSnippet:s.getSnippetForProperty(e,r,p,a),documentationLabel:r.description||""})});var n=e.schema.id;n&&s.contributions.forEach(function(e){r.push(e.collectPropertySuggestions(n,i,p,a,b))})}})}else if(d.parent){var h=function(e){e.properties.forEach(function(e){var t=e.key.value;b.add({type:"property",label:t,codeSnippet:s.getSnippetForSimilarProperty(t,e.value,p),documentationLabel:""})})};if("property"===d.parent.type){var m=d.parent.key.value;c.visit(function(e){return"property"===e.type&&e.key.value===m&&e.value&&"object"===e.value.type&&h(e.value),!0})}else"array"===d.parent.type&&d.parent.items.forEach(function(e){"object"===e.type&&e!==d&&h(e)})}}return!d||"string"!==d.type&&"number"!==d.type&&"boolean"!==d.type&&"null"!==d.type||(d=d.parent),e?r.push(s.getValueSuggestions(e,c,d,u,b)):r.push(s.getSchemaLessValueSuggestions(c,d,u,t,b)),o.Promise.join(r).then(function(){return v})})},e.prototype.getSchemaLessValueSuggestions=function(e,t,r,n,s){var i=this,a=function(e){var t=i.getSnippetForValue(e,n);s.add({type:i.getSuggestionType(e.type),label:t,codeSnippet:t,documentationLabel:""}),"boolean"===e.type&&i.addBooleanSuggestion(!e.getValue(),s)};if(t&&"property"===t.type&&r>t.colonOffset){var l=t.value;if(l&&r>l.end)return;var c=t.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&a(e.value),!0})}if(t&&"array"===t.type)if(t.parent&&"property"===t.parent.type){var c=t.parent.key.value;e.visit(function(e){return"property"===e.type&&e.key.value===c&&e.value&&"array"===e.value.type&&e.value.items.forEach(function(e){a(e)}),!0})}else t.items.forEach(function(e){a(e)});return o.Promise.as(0)},e.prototype.getValueSuggestions=function(e,t,r,n,s){var i=this,a=null;if(r&&"property"===r.type&&n>r.colonOffset){var l=r.value;if(l&&n>l.end)return o.Promise.as(0);a=r.key.value,r=r.parent}if(r&&(null!==a||"array"===r.type)){var c=[],u=[];return t.validate(e.schema,u,r.start),u.forEach(function(e){var t=null,n="string";if(e.node===r&&!e.inverted&&e.schema){if("array"===r.type&&e.schema.items)t=e.schema.items.enum,n=e.schema.items.type;else if(e.schema.properties){var o=e.schema.properties[a];o&&(t=o.enum,n=o.type)}if(Array.isArray(t))for(var l=0;l<t.length;l++){var u=JSON.stringify(t[l]);s.add({type:i.getSuggestionType(n),label:u,codeSnippet:u,documentationLabel:""})}else"boolean"===n&&(i.addBooleanSuggestion(!0,s),i.addBooleanSuggestion(!1,s));var d=e.schema.id;d&&i.contributions.forEach(function(e){c.push(e.collectValueSuggestions(d,a,s))})}}),o.Promise.join(c)}return o.Promise.as(0)},e.prototype.addBooleanSuggestion=function(e,t){var r=e?"true":"false";t.add({type:this.getSuggestionType("boolean"),label:r,codeSnippet:r,documentationLabel:""})},e.prototype.getSuggestionType=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return"text";switch(e){case"string":return"text";case"object":return"module";case"property":return"property";default:return"value"}},e.prototype.getSnippetForValue=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:var r=t.getValueInRange(t.getRangeFromOffsetAndLength(e.start,e.end-e.start));return r}},e.prototype.getSnippetForProperty=function(e,t,r,o){if(r)return e;var s='"'+e+'": ',i=function(e){var t=JSON.stringify(e);return t.length>0&&'"'===t.charAt(0)?'"{{'+t.substr(1,t.length-2)+'}}"':"{{"+t+"}}"},a=t.default;if(n.isUndefined(a))if(t.enum&&t.enum.length>0)s+=i(t.enum[0]);else switch(t.type){case"boolean":s+="{{false}}";break;case"string":s+='"{{}}"';break;case"object":s+="{{{}}}";break;case"array":s+="[{{}}]";break;case"number":s+="{{0}}";break;default:return s}else s+=i(a);return o||(s+=","),s},e.prototype.getSnippetForSimilarProperty=function(e,t,r){return void 0===r&&(r=!1),r?e:'"'+e+'": '},e}();t.JSONIntellisense=s}),define("vs/languages/json/contributions/projectJSONContribution",["require","exports","vs/base/lib/winjs.base","vs/nls!vs/languages/json/jsonWorker"],function(e,t,r,n){var o=function(){function e(e){this.requestService=e.requestService}return e.prototype.collectPropertySuggestions=function(e,t,o,s,i){if("nugget-packages"===e){var a;return a=t.length>0?"https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20ge%20'"+encodeURIComponent(t)+"'%20and%20Id%20lt%20'"+encodeURIComponent(t+"z")+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Id,Version,Description&$format=json&$top=100":"https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=IsAbsoluteLatestVersion%20eq%20true&$orderby=DownloadCount%20desc&$top=100&$select=Id,Version,DownloadCount,Description&$format=json",this.requestService.makeRequest({url:a}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d))for(var r=t.d,a=0;a<r.length;a++){var l=r[a],c=l.Id,u=l.Version;if(c){var d=l.Description&&l.Version?n.localize("vs_languages_json_contributions_projectJSONContribution",0,l.Description,l.Version):"",h=o?c:JSON.stringify(c)+': "{{'+u+'}}"';o||s||(h+=","),i.add({type:"property",label:c,codeSnippet:h,documentationLabel:d})}}}catch(p){}},function(){return 0})}return r.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,o){if("nugget-packages"===e){var s="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(t)+"'&$select=Version,IsAbsoluteLatestVersion&$format=json&$top=50";return this.requestService.makeRequest({url:s}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t.d))for(var r=t.d,s=0;s<r.length;s++){var i=r[s],a=i.Version;if(a){var l=JSON.stringify(a),c="true"===i.IsAbsoluteLatestVersion,u=l,d="";c&&(d=n.localize("vs_languages_json_contributions_projectJSONContribution",1)),o.add({type:"class",label:u,codeSnippet:l,documentationLabel:d})}}}catch(h){}return 0},function(){return 0})}return r.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("nugget-package"===e){var r=[];r.push({className:"type",text:n.localize("vs_languages_json_contributions_projectJSONContribution",2,t)});var o="https://www.myget.org/F/aspnetrelease/api/v2/Packages?$filter=Id%20eq%20'"+encodeURIComponent(t)+"'%20and%20IsAbsoluteLatestVersion%20eq%20true&$select=Version,Description&$format=json&$top=5";return this.requestService.makeRequest({url:o}).then(function(e){var t=e.responseText;if(t)try{var o=JSON.parse(t);if(o.d&&o.d[0]){var s=o.d[0];s.Description&&r.push({className:"documentation",text:s.Description}),s.Version&&r.push({className:"documentation",text:n.localize("vs_languages_json_contributions_projectJSONContribution",3,s.Version)})}}catch(i){}return r},function(){return r})}return null},e}();t.ProjectJSONContribution=o}),define("vs/languages/json/contributions/packageJSONContribution",["require","exports","vs/base/lib/winjs.base","vs/nls!vs/languages/json/jsonWorker"],function(e,t,r,n){var o=function(){function e(e){this.requestService=e.requestService}return e.prototype.collectPropertySuggestions=function(e,t,n,o,s){if("npm-packages"===e){var i;return i=t.length>0?"https://typeahead.npmjs.com/search?q="+encodeURIComponent(t):"https://typeahead.npmjs.com/search?q=",this.requestService.makeRequest({url:i}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t))for(var r=t,i=0;i<r.length;i++){var a=r[i].value,l=n?a:JSON.stringify(a)+': "{{*}}"';n||o||(l+=","),s.add({type:"property",label:a,codeSnippet:l,documentationLabel:""})}}catch(c){}s.setAsIncomplete()},function(){return 0})}return r.Promise.as(0)},e.prototype.collectValueSuggestions=function(e,t,n){if("npm-packages"===e){var o="http://registry.npmjs.org/"+encodeURIComponent(t)+"/latest";return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.version){var r=t.version,o=JSON.stringify(r);n.add({type:"class",label:o,codeSnippet:o,documentationLabel:"The currently latest version of the package"}),o=JSON.stringify("^"+r),n.add({type:"class",label:o,codeSnippet:o,documentationLabel:"Matches the most recent major version (1.x.x)"}),o=JSON.stringify("~"+r),n.add({type:"class",label:o,codeSnippet:o,documentationLabel:"Matches the most recent minor version (1.2.x)"})}}catch(s){}return 0},function(){return 0})}return r.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("npm-package"===e){var r=[];r.push({className:"type",text:n.localize("vs_languages_json_contributions_packageJSONContribution",0,t)});var o="http://registry.npmjs.org/"+encodeURIComponent(t)+"/latest";return this.requestService.makeRequest({url:o}).then(function(e){try{var t=JSON.parse(e.responseText);t&&(t.description&&r.push({className:"documentation",text:t.description}),t.version&&r.push({className:"documentation",text:n.localize("vs_languages_json_contributions_packageJSONContribution",1,t.version)}))}catch(o){}return r},function(){return r})}return null},e}();t.PackageJSONContribution=o}),define("vs/languages/json/contributions/bowerJSONContribution",["require","exports","vs/base/strings","vs/base/lib/winjs.base","vs/nls!vs/languages/json/jsonWorker"],function(e,t,r,n,o){var s=function(){function e(e){this.topRanked=["twitter","bootstrap","angular-1.1.6","angular-latest","angulerjs","d3","myjquery","jq","abcdef1234567890","jQuery","jquery-1.11.1","jquery","sushi-vanilla-x-data","font-awsome","Font-Awesome","font-awesome","fontawesome","html5-boilerplate","impress.js","homebrew","backbone","moment1","momentjs","moment","linux","animate.css","animate-css","reveal.js","jquery-file-upload","blueimp-file-upload","threejs","express","chosen","normalize-css","normalize.css","semantic","semantic-ui","Semantic-UI","modernizr","underscore","underscore1","material-design-icons","ionic","chartjs","Chart.js","nnnick-chartjs","select2-ng","select2-dist","phantom","skrollr","scrollr","less.js","leancss","parser-lib","hui","bootstrap-languages","async","gulp","jquery-pjax","coffeescript","hammer.js","ace","leaflet","jquery-mobile","sweetalert","typeahead.js","soup","typehead.js","sails","codeigniter2"],this.requestService=e.requestService}return e.prototype.collectPropertySuggestions=function(e,t,r,o,s){if("bower-packages"===e){if(t.length>0){var i="https://bower.herokuapp.com/packages/search/"+encodeURIComponent(t);return this.requestService.makeRequest({url:i}).then(function(e){try{var t=JSON.parse(e.responseText);if(Array.isArray(t))for(var n=t,i=0;i<n.length;i++){var a=n[i].name,l=n[i].description||"",c=r?a:JSON.stringify(a)+': "{{*}}"';r||o||(c+=","),s.add({type:"property",label:a,codeSnippet:c,documentationLabel:l})}}catch(u){}},function(){return 0})}this.topRanked.forEach(function(e){var t=r?e:JSON.stringify(e)+': "{{*}}"';s.add({type:"property",label:e,codeSnippet:t,documentationLabel:""})})}return n.Promise.as(0)},e.prototype.collectValueSuggestions=function(){return n.Promise.as(0)},e.prototype.getInfoContribution=function(e,t){if("bower-package"===e){var n=[];n.push({className:"type",text:o.localize("vs_languages_json_contributions_bowerJSONContribution",0,t)});var s="https://bower.herokuapp.com/packages/"+encodeURIComponent(t);return this.requestService.makeRequest({url:s}).then(function(e){try{var t=JSON.parse(e.responseText);if(t&&t.url){var o=t.url;r.startsWith(o,"git://")&&(o=o.substring(6)),r.endsWith(o,".git")&&(o=o.substring(0,o.length-4)),n.push({className:"documentation",text:o})}}catch(s){}return n},function(){return n})}return null},e}();t.BowerJSONContribution=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/json/jsonWorker",["require","exports","vs/base/severity","vs/editor/worker/modesWorker","./parser/jsonParser","./jsonSchemaService","./jsonIntellisense","vs/base/lib/winjs.base","vs/base/strings","./contributions/projectJSONContribution","vs/editor/modes/supports","./contributions/packageJSONContribution","./contributions/bowerJSONContribution"],function(e,t,r,n,o,s,i,a,l,c,u,d,h){var p=function(e){function t(t,r,n){e.call(this,t,r,n),this.jsonMode=r,this.requestService=t.requestService,this.schemaService=new s.JSONSchemaService(t),this.contributions=[t.instantiationService.createInstance(c.ProjectJSONContribution),t.instantiationService.createInstance(d.PackageJSONContribution),t.instantiationService.createInstance(h.BowerJSONContribution)],this.jsonIntellisense=new i.JSONIntellisense({schemaService:this.schemaService,requestService:this.requestService},this.contributions)}return __extends(t,e),t.prototype._createInPlaceReplaceSupport=function(){return new u.InplaceReplaceSupport(this.resourceService,this)},t.prototype._doConfigure=function(e){var t=this;return e&&e.schemas&&(this.schemaService.clearExternalSchemas(),e.schemas.forEach(function(e){if(e.url&&(e.fileMatch||e.schema)){var r=e.url,n=!1;l.startsWith(r,"http://")||l.startsWith(r,"https://")||(r=t.requestService.getRequestUrl("root",r,!0),n=!0);var o=null;if(e.fileMatch){o=[];for(var s=0;s<e.fileMatch.length;s++)try{o.push(new RegExp(l.convertSimple2RegExpPattern(e.fileMatch[s])))}catch(i){}}t.schemaService.registerExternalSchema(r,o,e.schema)}else if(e.filePattern&&e.schemaPath){var r=t.requestService.getRequestUrl("root",e.schemaPath),o=[];try{o.push(new RegExp(e.filePattern))}catch(i){}t.schemaService.registerExternalSchema(r,o)}})),a.TPromise.as(!0)},t.prototype.setConfigurationSchemas=function(e){var t=this;return e.forEach(function(e){t.schemaService.registerConfigurationSchema(e)}),a.TPromise.as(!0)},t.prototype.doValidate=function(e){var t=this,n=this.resourceService.get(e),s=new o.JSONParser,i=s.parse(n.getValue());this.schemaService.getSchemaForResource(e.toExternal(),i).then(function(o){if(o)if(o.loadError&&i.root){var s="object"===i.root.type?i.root.getFirstProperty("$schema"):null;if(s){var a=s.value||s;i.warnings.push({location:{start:a.start,end:a.end},message:o.loadError})}else i.warnings.push({location:{start:i.root.start,end:i.root.start+1},message:o.loadError})}else i.validate(o.schema);var l=i.errors.concat(i.warnings).map(function(e,t){var o=n.getPositionFromOffset(e.location.start),s=n.getPositionFromOffset(e.location.end);return{message:e.message,severity:t>=i.errors.length?r.Warning:r.Error,startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:s.lineNumber,endColumn:s.column}});t.markerService.changeOne(t._getMode().getId(),e,l)})},t.prototype.doSuggest=function(e,t){var r=this,n=this.resourceService.get(e);return this.jsonIntellisense.doSuggest(e,n,t).then(function(n){return n&&0===n.suggestions.length&&n.currentWord.length>0&&(n.suggestions=r.suggestWords(e,t,!0)),n})},t.prototype.computeInfo=function(e,t){var r=this,n=this.resourceService.get(e),s=new o.JSONParser,i=s.parse(n.getValue()),l=n.getOffsetFromPosition(t),c=i.getNodeFromOffset(l),u=c;if(c&&"string"===c.type){var d=c;if(d.isKey){var h=c.parent;c=h.value}}return c?this.schemaService.getSchemaForResource(e.toExternal(),i).then(function(e){if(e){var t=[];i.validate(e.schema,t,c.start);var o=null,s=null;if(t.every(function(e){return e.node===c&&!e.inverted&&e.schema&&(o=o||e.schema.description,s=s||e.schema.id),!0}),s&&c.name)for(var a=r.contributions.length-1;a>=0;a--){var l=r.contributions[a],d=l.getInfoContribution(s,c.name);if(d)return d.then(function(e){return r.createInfoResult(e,u,n)})}if(o){var h=[{className:"documentation",text:o}];return r.createInfoResult(h,u,n)}}return null}):a.Promise.as(null)},t.prototype.createInfoResult=function(e,t,r){var n=r.getRangeFromOffsetAndLength(t.start,t.end-t.start),o={value:"",htmlContent:e,className:"typeInfo json",range:n};return o},t.prototype.getOutline=function(e){function t(e,n){if("array"===n.type)n.items.forEach(function(r){t(e,r)});else if("object"===n.type){var o=n;o.properties.forEach(function(n){var o=r.getRangeFromOffsetAndLength(n.start,n.end-n.start),s=n.value;if(s){var i=t([],s),a="object"===s.type?"module":s.type;e.push({label:n.key.getValue(),icon:a,type:s.type,range:o,children:i})}})}return e}var r=this.resourceService.get(e),n=new o.JSONParser,s=n.parse(r.getValue()),i=s.root;if(!i)return a.Promise.as(null);var l=t([],i);return a.Promise.as(l)},t.prototype.textReplace=function(e,t){return u.ReplaceSupport.valueSetReplace(["true","false"],e,t)},t.prototype.format=function(e,t,r){var n=this.resourceService.get(e),o=t?n.getValueInRange(t):n.getValue(),s=4;s=r.insertSpaces?r.tabSize:"	";try{return a.TPromise.as([{range:t,text:JSON.stringify(JSON.parse(o),null,s)}])}catch(i){return null}},t.prototype.navigateValueSetFallback=function(e,t,r){var n=this,s=this.resourceService.get(e),i=s.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn}),a=new o.JSONParser,c=new o.JSONDocumentConfig;c.ignoreDanglingComma=!0;var u=a.parse(s.getValue(),c),d=u.getNodeFromOffsetEndInclusive(i);return!d||"string"!==d.type&&"number"!==d.type&&"boolean"!==d.type&&"null"!==d.type?null:this.schemaService.getSchemaForResource(e.toExternal(),u).then(function(e){if(e){var t=[],o={},i={add:function(e){o[e.label]||(o[e.label]=!0,t.push(e))},setAsIncomplete:function(){}};return n.jsonIntellisense.getValueSuggestions(e,u,d.parent,d.start,i).then(function(){for(var e=s.getRangeFromOffsetAndLength(d.start,d.end-d.start),n=s.getValueInRange(e),o=0,i=t.length;i>o;o++)if(l.equalsIgnoreCase(t[o].label,n)){var a=o;return r?a=(o+1)%i:(a=o-1,0>a&&(a=i-1)),{value:t[a].label,range:e}}return null})}})},t}(n.AbstractWorkerMode);t.JSONWorker=p});