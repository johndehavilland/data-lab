/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";define("vs/platform/configuration/configurationRegistry",["require","exports","vs/nls!vs/languages/json/json","vs/platform/platform","vs/base/objects"],function(e,t,r,n,o){t.Extensions={Configuration:"base.contributions.configuration"};var s=function(){function e(){this.configurationContributors=[],this.masterConfiguration={id:"configurationFile",title:r.localize("vs_platform_configuration_configurationRegistry",0),description:r.localize("vs_platform_configuration_configurationRegistry",1),type:"object",properties:{type:{type:"string",description:r.localize("vs_platform_configuration_configurationRegistry",2)},languages:{type:"object",description:r.localize("vs_platform_configuration_configurationRegistry",3),properties:{}}}}}return e.prototype.registerConfiguration=function(e){e=o.clone(e),this.configurationContributors.push(e),this.registerConfigurationNode(this.masterConfiguration,e.id.split("/"),e.id)},e.prototype.registerConfigurationNode=function(e,t,r){if(1===t.length)e.properties[t[0]]={type:"ref",$ref:r};else{var n=t.shift();e.properties[n]||(e.properties[n]={type:"object",properties:{}}),this.registerConfigurationNode(e.properties[n],t,r)}},e.prototype.getConfigurations=function(){return this.configurationContributors.slice(0)},e.prototype.getConfigurationSchemas=function(){var e=this.getConfigurations();return e.push(this.masterConfiguration),e},e}();n.Registry.add(t.Extensions.Configuration,new s)}),define("vs/languages/json/features/tokenization",["require","exports","vs/editor/modes/modes","vs/base/json"],function(e,t,r,n){function o(e,t){return{shouldGenerateEmbeddedModels:!1,getInitialState:function(){return new i(e,null,null,!1)},tokenize:function(r,n,o,i){return s(e,t,r,n,o,i)}}}function s(e,t,o,s,a){void 0===a&&(a=0);var l=0,c=!1;switch(s.scanError){case n.ScanError.UnexpectedEndOfString:o='"'+o,l=1;break;case n.ScanError.UnexpectedEndOfComment:o="/*"+o,l=2}var u,d,h=n.createScanner(o),p=s.lastWasColon;for(d={tokens:[],actualStopOffset:o.length,endState:s.clone(),modeTransitions:[{startIndex:0,mode:e}]};;){var m=a+h.getPosition(),f=r.Bracket.None,v="";if(u=h.scan(),u===n.SyntaxKind.EOF)break;if(m===a+h.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+o.substr(h.getPosition(),3));switch(c&&(m-=l),c=l>0,u){case n.SyntaxKind.OpenBraceToken:f=r.Bracket.Open,v="delimiter.bracket.json";break;case n.SyntaxKind.CloseBraceToken:f=r.Bracket.Close,v="delimiter.bracket.json";break;case n.SyntaxKind.OpenBracketToken:f=r.Bracket.Open,v="delimiter.array.json";break;case n.SyntaxKind.CloseBracketToken:f=r.Bracket.Close,v="delimiter.array.json";break;case n.SyntaxKind.ColonToken:v="delimiter.colon.json";break;case n.SyntaxKind.CommaToken:v="delimiter.comma.json";break;case n.SyntaxKind.TrueKeyword:case n.SyntaxKind.FalseKeyword:case n.SyntaxKind.NullKeyword:v="keyword.json";break;case n.SyntaxKind.StringLiteral:v=p?"string.value.json":"string.key.json";break;case n.SyntaxKind.NumericLiteral:v="number.json"}if(t)switch(u){case n.SyntaxKind.LineCommentTrivia:v="comment.line.json";break;case n.SyntaxKind.BlockCommentTrivia:v="comment.block.json"}""!==v&&(p=u===n.SyntaxKind.ColonToken),d.endState=new i(s.getMode(),s.getStateData(),h.getTokenError(),p),d.tokens.push({startIndex:m,type:v,bracket:f})}return d}t.createTokenizationSupport=o;var i=function(){function e(e,t,r,n){this._mode=e,this._state=t,this.scanError=r,this.lastWasColon=n}return e.prototype.clone=function(){return new e(this._mode,this._state,this.scanError,this.lastWasColon)},e.prototype.equals=function(t){return t===this?!0:t&&t instanceof e?this.scanError===t.scanError&&this.lastWasColon===t.lastWasColon:!1},e.prototype.getMode=function(){return this._mode},e.prototype.tokenize=function(){throw new Error},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}()});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("vs/languages/json/json",["require","exports","vs/platform/configuration/configurationRegistry","vs/editor/modes/autoIndentation/autoIndentation","vs/editor/modes/supports","vs/editor/modes/modesExtensions","vs/platform/platform","vs/nls!vs/languages/json/json","vs/platform/services","vs/platform/thread/attribute","vs/languages/json/features/tokenization"],function(e,t,r,n,o,s,i,a,l,c,u){var d=function(e){function t(r,n){e.call(this,r,n,l.AsyncDescriptor.create("vs/languages/json/jsonWorker","JSONWorker")),this.tokenizationSupport=u.createTokenizationSupport(this,!0),this.electricCharacterSupport=new o.BracketElectricCharacterSupport(this,t._brackets),this.extraInfoSupport=this,this.outlineSupport=this,this.formattingSupport=this,this.characterPairSupport=new o.CharacterPairSupport(this,[{open:"{",close:"}",notIn:["string.json"]},{open:"[",close:"]",notIn:["string.json"]},{open:'"',close:'"',notIn:["string.json"]}])}return __extends(t,e),t.prototype.creationDone=function(){if(e.prototype.creationDone.call(this),this._threadService.isInMainThread){var t=i.Registry.as(r.Extensions.Configuration);this._configureWorkerSchemas(t.getConfigurationSchemas())}},t.prototype.getSerializableState=function(){var e=i.Registry.as(r.Extensions.Configuration);return{schemas:e.getConfigurationSchemas()}},t.prototype.setData=function(e){this._worker(function(t){return t.setConfigurationSchemas(e.schemas)})},t.prototype._worker=function(t){return e.prototype._worker.call(this,t)},t.prototype._configureWorkerSchemas=function(e){return this._worker(function(t){return t.setConfigurationSchemas(e)})},t.prototype.computeInfo=function(e,t){return this._worker(function(r){return r.computeInfo(e,t)})},t.prototype.getOutline=function(e){return this._worker(function(t){return t.getOutline(e)})},t.prototype.formatDocument=function(e,t){return this._worker(function(r){return r.format(e,null,t)})},t.prototype.formatRange=function(e,t,r){return this._worker(function(n){return n.format(e,t,r)})},t.prototype.getOutlineGroupLabel=function(e){switch(e){case"object":return a.localize("vs_languages_json_json",0);case"array":return a.localize("vs_languages_json_json",1);case"string":return a.localize("vs_languages_json_json",2);case"number":return a.localize("vs_languages_json_json",3);case"boolean":return a.localize("vs_languages_json_json",4);case"null":return a.localize("vs_languages_json_json",5)}},t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},t.prototype.getNonWordTokenTypes=function(){return["delimiter.json","delimiter.bracket.json","delimiter.array.json"]},t.prototype.shouldAutotriggerSuggestImpl=function(e,t){var r=e.findIndexOfOffset(t),n=e.getTokenType(r);switch(n){case"comment.line.json":case"comment.block.json":return!1;default:return!0}},t.prototype.getWordDefinition=function(){return t.WORD_DEFINITION},t._brackets=new n.Brackets([{tokenType:"delimiter.bracket.json",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.json",open:"[",close:"]",isElectric:!0}]),t.$_configureWorkerSchemas=c.AllWorkers(t,t.prototype._configureWorkerSchemas),t.$computeInfo=c.OneWorker(t,t.prototype.computeInfo),t.$getOutline=c.OneWorker(t,t.prototype.getOutline),t.$formatDocument=c.OneWorker(t,t.prototype.formatDocument),t.$formatRange=c.OneWorker(t,t.prototype.formatRange),t.WORD_DEFINITION=s.createWordRegExp(".-"),t}(s.AbstractMode);t.JSONMode=d});